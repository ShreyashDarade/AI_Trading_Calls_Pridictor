<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Backtest your trading strategies with historical data and AI signals.">
    <title>Backtests | Indian AI Trader</title>
    
    <link rel="icon" type="image/svg+xml" href="/assets/logo.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/pages.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-content">
            <a href="/" class="navbar-brand">
                <i class="fas fa-chart-line"></i>
                <span>Indian AI Trader</span>
            </a>
            
            <ul class="navbar-nav">
                <li><a href="/" class="nav-link"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="/pages/watchlist.html" class="nav-link"><i class="fas fa-eye"></i> Watchlist</a></li>
                <li><a href="/pages/signals.html" class="nav-link"><i class="fas fa-bolt"></i> Signals</a></li>
                <li><a href="/pages/backtests.html" class="nav-link active"><i class="fas fa-chart-bar"></i> Backtests</a></li>
                <li><a href="/pages/settings.html" class="nav-link"><i class="fas fa-cog"></i> Settings</a></li>
            </ul>
            
            <div class="market-status" id="market-status">
                <span class="market-status-dot closed" id="market-dot"></span>
                <span id="market-label">Market Closed</span>
            </div>
        </div>
    </nav>
    
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">
                    <i class="fas fa-chart-bar" style="color: var(--accent-primary);"></i>
                    Strategy Backtests
                </h1>
                <p class="page-subtitle">Test your trading strategies on historical data with walk-forward analysis</p>
            </div>
            
            <!-- Action Bar -->
            <div class="flex-between mb-lg">
                <div class="tabs">
                    <button class="tab active">All Backtests</button>
                    <button class="tab">Completed</button>
                    <button class="tab">Running</button>
                </div>
                <button class="btn btn-primary" onclick="showNewBacktestModal()">
                    <i class="fas fa-plus"></i> New Backtest
                </button>
            </div>
            
            <!-- Summary Stats -->
            <div class="grid grid-4 mb-lg">
                <div class="card stat-card">
                    <div class="stat-value">12</div>
                    <div class="stat-label">Total Backtests</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value text-success">8</div>
                    <div class="stat-label">Profitable</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value">1.85</div>
                    <div class="stat-label">Best Sharpe</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value">68%</div>
                    <div class="stat-label">Avg Win Rate</div>
                </div>
            </div>
            
            <!-- Backtests Table -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Backtest History</h3>
                </div>
                <div class="card-body" style="padding: 0;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Period</th>
                                <th>Capital</th>
                                <th>Return</th>
                                <th>Sharpe</th>
                                <th>Max DD</th>
                                <th>Win Rate</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <strong>MACD + RSI Strategy</strong>
                                    <div class="text-muted" style="font-size: 0.75rem;">NIFTY 50 Universe</div>
                                </td>
                                <td>Jan 2024 - Dec 2024</td>
                                <td class="font-mono">₹10,00,000</td>
                                <td class="text-success font-mono">+24.5%</td>
                                <td class="font-mono">1.85</td>
                                <td class="text-danger font-mono">-8.2%</td>
                                <td class="font-mono">68%</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>
                                    <button class="btn btn-secondary btn-sm" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-secondary btn-sm" title="Download Report">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Momentum Breakout</strong>
                                    <div class="text-muted" style="font-size: 0.75rem;">Bank NIFTY</div>
                                </td>
                                <td>Jun 2024 - Dec 2024</td>
                                <td class="font-mono">₹5,00,000</td>
                                <td class="text-success font-mono">+18.3%</td>
                                <td class="font-mono">1.42</td>
                                <td class="text-danger font-mono">-12.4%</td>
                                <td class="font-mono">58%</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>
                                    <button class="btn btn-secondary btn-sm" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-secondary btn-sm" title="Download Report">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Mean Reversion RSI</strong>
                                    <div class="text-muted" style="font-size: 0.75rem;">Custom Watchlist</div>
                                </td>
                                <td>Jan 2024 - Dec 2024</td>
                                <td class="font-mono">₹10,00,000</td>
                                <td class="text-danger font-mono">-3.2%</td>
                                <td class="font-mono">-0.24</td>
                                <td class="text-danger font-mono">-15.8%</td>
                                <td class="font-mono">42%</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>
                                    <button class="btn btn-secondary btn-sm" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-secondary btn-sm" title="Download Report">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>AI Signal v2.1</strong>
                                    <div class="text-muted" style="font-size: 0.75rem;">NIFTY 50 Universe</div>
                                </td>
                                <td>Oct 2024 - Dec 2024</td>
                                <td class="font-mono">₹10,00,000</td>
                                <td colspan="4" style="text-align: center;">
                                    <div class="progress-bar" style="width: 100%; max-width: 200px; display: inline-block;">
                                        <div class="progress-fill" style="width: 65%;"></div>
                                    </div>
                                    <span style="margin-left: 0.5rem;">65%</span>
                                </td>
                                <td><span class="badge badge-warning">Running</span></td>
                                <td>
                                    <button class="btn btn-secondary btn-sm" title="Stop">
                                        <i class="fas fa-stop"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- New Backtest Section -->
            <div class="card mt-lg" id="new-backtest-section" style="display: none;">
                <div class="card-header">
                    <h3 class="card-title">Create New Backtest</h3>
                    <button class="btn btn-secondary btn-sm" onclick="hideNewBacktestModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="card-body">
                    <form id="backtest-form">
                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label">Backtest Name</label>
                                <input type="text" class="form-input" placeholder="e.g., MACD Strategy Q4 2024" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Universe</label>
                                <select class="form-select">
                                    <option>NIFTY 50</option>
                                    <option>Bank NIFTY</option>
                                    <option>NIFTY IT</option>
                                    <option>Custom Watchlist</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-3">
                            <div class="form-group">
                                <label class="form-label">Start Date</label>
                                <input type="date" class="form-input" value="2024-01-01" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">End Date</label>
                                <input type="date" class="form-input" value="2024-12-31" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Initial Capital (₹)</label>
                                <input type="number" class="form-input" value="1000000" min="100000" required>
                            </div>
                        </div>
                        
                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label">Strategy</label>
                                <select class="form-select">
                                    <option>AI Signal (Default)</option>
                                    <option>MACD + RSI</option>
                                    <option>Momentum Breakout</option>
                                    <option>Mean Reversion</option>
                                    <option>Custom (JSON Config)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Timeframe</label>
                                <select class="form-select">
                                    <option>15 minutes</option>
                                    <option>1 hour</option>
                                    <option>Daily</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-lg" style="text-align: right;">
                            <button type="button" class="btn btn-secondary" onclick="hideNewBacktestModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-play"></i> Start Backtest
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Indian AI Trader. Built with ❤️ for the Indian trading community.</p>
        </div>
    </footer>
    
    <script src="/js/app.js"></script>
    <script>
        function showNewBacktestModal() {
            document.getElementById('new-backtest-section').style.display = 'block';
            document.getElementById('new-backtest-section').scrollIntoView({ behavior: 'smooth' });
        }
        
        function hideNewBacktestModal() {
            document.getElementById('new-backtest-section').style.display = 'none';
        }
        
        document.getElementById('backtest-form').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Backtest started! You will be notified when complete.');
            hideNewBacktestModal();
        });
    </script>
</body>
</html>
